\documentclass{article}

\usepackage{verbatim}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{enumitem}

\begin{document}

\pagestyle{empty}

\title{COMP 520 - Milestone 2}
\author{
Alexandre St-Louis Fortier (260720127)\\
Stefan Knudsen (260678259)\\
Cheuk Chuen Siow (260660584)}
\maketitle

\raggedright
\section*{Design Decisions}
\subsection*{Symbol table}
Initially, the symbol table consisted of a list of maps (as in dictionaries). We briefly considered the alpha-renaming approach, but ended up changing the symbol table to be a list of hashtables, as had been presented in class.

\subsection*{Type checker}
Type-checking closely followed the typechecker pdf.
New scopes are added at the beginning of every block, and at the end of every block, the top hash table is popped.
At variable, type, and function declarations, a check is made to see if the id has been declared in the current scope. A type error is raised if it's already been declared.

Because of the initial idea of using an immutable map rather than a mutable hash table, type checking consisted of ``threading'' the context through lists, that is, mapping while passing each context onto the next element of the list. Since we decided not to use the map, this is no longer needed, (simply mapping suffices) but not all instances were replaced.

Because type declaration is allowed in golite, the approach of matching the types and operators that we had seen for for the minilang compiler wouldn't work. We took the approach of pattern matching on the operator and checking if two types were unifiable. If their upper bound were belonged to the class of types allowable for the operator, then the upper bound was the type returned.


\subsection*{Weeder}

\subsection*{Pretty printer}
We decided that we needed to modify the AST to include annotations. This required making changes to the pretty printer from the first deliverable. Due to the nature of the ast, only minor modifications were then needed to allow type printing of the typed AST.

\subsection*{Testing}

\section*{Team Work}
\subsection*{Main}
Alexandre made modifications to main.ml that allowed for the -dumpsymtab and -pptype flags.

\subsection*{Ast}
Alexandre modified the AST so as to add annotations.

\subsection*{Symbol table}
Cheuk Chuen wrote the symbol table.

\subsection*{Type checker}
Stefan laid the ground work for the type checker, and Alexandre made changes for the modified ast.

\subsection*{Weeder}
Alexandre wrote the brunt of the weeder, with Chuek making changes as well.

\subsection*{Pretty printer}
Stefan modified the pretty printer to work for the new ast and to print the types of typed expresions.

\subsection*{Testing}
Cheuk Chuen wrote the majority of the tests.


%% \section*{References}
%% \begin{enumerate}
%%   \item http://caml.inria.fr/pub/docs/manual-ocaml-4.00/manual026.html
%%   \item https://realworldocaml.org/v1/en/html/parsing-with-ocamllex-and-menhir.html
%%   \item http://pauillac.inria.fr/~fpottier/menhir/manual.pdf
%% \end{enumerate}

\end{document}
